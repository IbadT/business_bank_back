# –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

#### 1. –°—Ç—Ä–æ–≥–∏–π SRP –∏ –≤—ã—Å–æ–∫–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
–ö–∞–∂–¥—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω—É —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:
- **Matematika** - —Ç–æ–ª—å–∫–æ —Ä–∞—Å—á–µ—Ç—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **Maska** - —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π/–º–∞—Å–æ–∫
- **Shared** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

#### 2. –°–ª–∞–±–æ–µ –∑–∞—Ü–µ–ø–ª–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (REST API, gRPC)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Kafka
- –ù–∏–∫—Ç–æ –Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

#### 3. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ API –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏
- **REST/gRPC** –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ–ª—É—á–∏—Ç—å –≥–æ—Ç–æ–≤—É—é –≤—ã–ø–∏—Å–∫—É)
- **Kafka** –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–µ–ª–æ–≥–æ –º–µ—Å—è—Ü–∞)
- –°—Ç—Ä–æ–≥–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

#### 4. –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∫–æ–Ω—Ç–µ–π–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω (Docker)
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –≤ Shared-—Å–µ—Ä–≤–∏—Å–µ –∏–ª–∏ –æ–±—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

### 1. Matematika Service (Go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ß–∏—Å–ª–æ–≤–æ–µ —è–¥—Ä–æ - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–∏—Å–∫–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go + Gin + PostgreSQL + Redis + Kafka
- **–ü–æ—á–µ–º—É Go:** –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤, –æ—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞–º–∏, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è

**–§—É–Ω–∫—Ü–∏–∏:**
- –†–∞—Å—á–µ—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –¥–Ω—è–º
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—É–º–º (–æ–±–æ—Ä–æ—Ç, –¥–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã, —á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å)
- –ü–æ–¥—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–∏–æ–¥–∞
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –Ω–µ–¥–µ–ª—è–º, —É—á–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤, –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª–∏)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JSON —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –∏—Ç–æ–≥–æ–º

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–ø–∏—Å–∫–∏ (–º–µ—Å—è—Ü, —Ç–∏–ø –±–∏–∑–Ω–µ—Å–∞ B2B/B2C, –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ Shared-—Å–µ—Ä–≤–∏—Å–∞

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- JSON —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –∏—Ç–æ–≥–æ–º
- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ —Ç–∏–ø–∞–º–∏ (ACH, Wire, —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥)

**API Endpoints:**
```
POST /generate-statement
GET /statement/{id}/status
GET /statement/{id}/result
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- PostgreSQL - —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤
- Redis - –∫—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

---

### 2. Maska Service (NestJS)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** NestJS + TypeScript + PostgreSQL + Redis + Kafka
- **–ü–æ—á–µ–º—É NestJS:** –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–∞–±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ "—Å—ã—Ä—ã—Ö" –¥–∞–Ω–Ω—ã—Ö Matematika –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏
- –ù–∞–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤, –º–∞—Å–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–π
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/HTML –≤—ã–ø–∏—Å–æ–∫
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç, –Ω–æ–º–µ—Ä–æ–≤ —Å—á–µ—Ç–æ–≤, –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–π

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- JSON –æ—Ç Matematika (—á–µ—Ä–µ–∑ REST –∏–ª–∏ Kafka)
- –®–∞–±–ª–æ–Ω—ã –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏–∑ Shared-—Å–µ—Ä–≤–∏—Å–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –§–∏–Ω–∞–ª—å–Ω—ã–π JSON –≥–æ—Ç–æ–≤—ã–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- PDF/HTML –≤—ã–ø–∏—Å–∫–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**API Endpoints:**
```
GET /statement/{id}/formatted
POST /statement/{id}/generate-pdf
GET /statement/{id}/download
PUT /user/{id}/settings
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- PostgreSQL - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤—ã–ø–∏—Å–æ–∫, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Redis - –∫—ç—à –≥–æ—Ç–æ–≤—ã—Ö –≤—ã–ø–∏—Å–æ–∫

---

### 3. Shared Service (Go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã–µ

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Go + Gin + PostgreSQL + File Storage
- **–ü–æ—á–µ–º—É Go:** –ü—Ä–æ—Å—Ç–æ—Ç–∞, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (—à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ—Ç—Ä–∞—Å–ª–µ–π)
- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –°–ø–∏—Å–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV
- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- –®–∞–±–ª–æ–Ω—ã —Å—Ç—Ä–æ–∫ (–º–∞—Å–∫–∏ –æ–ø–∏—Å–∞–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID, –≤–∞–ª–∏–¥–∞—Ü–∏—è JSON)

**–•—Ä–∞–Ω–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (gateways.csv, retails_ca.csv –∏ –¥—Ä.)
- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- –®–∞–±–ª–æ–Ω—ã –º–∞—Å–æ–∫ –æ–ø–∏—Å–∞–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –°–ø–∏—Å–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

**API Endpoints:**
```
GET /config/patterns
GET /config/holidays
GET /config/masks
GET /config/contractors/{category}
GET /utils/generate-id
POST /utils/validate-json
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- PostgreSQL - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- File Storage - CSV —Ñ–∞–π–ª—ã, —à–∞–±–ª–æ–Ω—ã

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend Services
- **Go:** Matematika Service, Shared Service
- **NestJS:** Maska Service

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL:** –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Redis:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–µ—Å—Å–∏–∏, –æ—á–µ—Ä–µ–¥–∏
- **File Storage:** CSV —Ñ–∞–π–ª—ã, —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **Docker Compose:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **Kafka:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- **Nginx:** API Gateway –∏ load balancer

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Prometheus:** –ú–µ—Ç—Ä–∏–∫–∏
- **Grafana:** –î–∞—à–±–æ—Ä–¥—ã
- **Jaeger:** Distributed tracing
- **Loki:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

### üîÑ **–ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞:**

#### **1. –ó–∞–ø—Ä–æ—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–∏—Å–∫–∏ (–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Client ‚Üí Nginx ‚Üí Matematika Service
POST /api/matematika/generate-statement
{
  "accountId": "12345",
  "month": "2025-01",
  "businessType": "B2C",
  "initialBalance": 10000.00
}
```

#### **2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Matematika ‚Üí Shared Service
GET /api/shared/config/patterns/{businessType}
GET /api/shared/config/holidays/{month}
```

#### **3. –†–∞—Å—á–µ—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å)**
```
Matematika Service:
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î
```

#### **4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞—Å—á–µ—Ç–æ–≤ (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Matematika ‚Üí Kafka Topic: statement.calculation.completed
{
  "statementId": "stmt_12345",
  "accountId": "12345",
  "month": "2025-01",
  "status": "completed",
  "data": { /* JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ */ }
}
```

#### **5. –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ (–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Maska ‚Üí Shared Service
GET /api/shared/config/masks/{statementType}
GET /api/shared/config/contractors/{category}
```

#### **6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–∏—Å–∫–∏ (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å)**
```
Maska Service:
- –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Matematika
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç —à–∞–±–ª–æ–Ω—ã –∏ –º–∞—Å–∫–∏
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç PDF/HTML/Excel
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≥–æ—Ç–æ–≤—É—é –≤—ã–ø–∏—Å–∫—É
```

#### **7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Maska ‚Üí Kafka Topic: statement.formatting.completed
{
  "statementId": "stmt_12345",
  "status": "ready",
  "downloadUrl": "/api/maska/statements/stmt_12345/download"
}
```

#### **8. –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–π –≤—ã–ø–∏—Å–∫–∏ (–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)**
```
Client ‚Üí Nginx ‚Üí Maska Service
GET /api/maska/statements/{statementId}/download
Response: PDF/HTML/Excel —Ñ–∞–π–ª
```

### üì° **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏:**

#### **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (HTTP/gRPC):**
- **Client ‚Üî Nginx** - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **Nginx ‚Üî Matematika** - –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- **Nginx ‚Üî Maska** - –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –≤—ã–ø–∏—Å–æ–∫
- **Matematika ‚Üî Shared** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **Maska ‚Üî Shared** - –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

#### **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (Kafka):**
- **–¢–æ–ø–∏–∫–∏:**
  - `statement.generation.request` - –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤—ã–ø–∏—Å–∫–∏
  - `statement.calculation.completed` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤ Matematika
  - `statement.formatting.completed` - –ì–æ—Ç–æ–≤—ã–µ –≤—ã–ø–∏—Å–∫–∏ Maska
  - `statement.error` - –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
1. Client ‚Üí Nginx ‚Üí Matematika (HTTP POST)
2. Matematika ‚Üí Shared (HTTP GET) - –∫–æ–Ω—Ñ–∏–≥–∏
3. Matematika ‚Üí Kafka (PUBLISH) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤
4. Maska ‚Üê Kafka (CONSUME) - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. Maska ‚Üí Shared (HTTP GET) - —à–∞–±–ª–æ–Ω—ã
6. Maska ‚Üí Kafka (PUBLISH) - –≥–æ—Ç–æ–≤—ã–µ –≤—ã–ø–∏—Å–∫–∏
7. Client ‚Üê Nginx ‚Üê Maska (HTTP GET) - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
```

### üìä **ASCII –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP POST    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP GET     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Client  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ  Nginx  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇMatematika‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ         ‚îÇ                 ‚îÇ Service  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                              ‚îÇ
                                                              ‚îÇ HTTP GET
                                                              ‚ñº
                                                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                        ‚îÇ Shared  ‚îÇ
                                                        ‚îÇ Service ‚îÇ
                                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                              ‚ñ≤
                                                              ‚îÇ HTTP GET
                                                              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Kafka PUBLISH   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Kafka CONSUME ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇMatematika‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ  Kafka  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ Maska   ‚îÇ
‚îÇ Service  ‚îÇ                    ‚îÇ         ‚îÇ                  ‚îÇ Service ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                 ‚îÇ
                                                                 ‚îÇ HTTP GET
                                                                 ‚ñº
                                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                            ‚îÇ Shared  ‚îÇ
                                                            ‚îÇ Service ‚îÇ
                                                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                 ‚ñ≤
                                                                 ‚îÇ
                                                                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP GET      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Kafka PUBLISH  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Client  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ  Nginx  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ Maska   ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ         ‚îÇ                   ‚îÇ Service ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

```

### üîÑ **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           –ü–û–¢–û–ö –ì–ï–ù–ï–†–ê–¶–ò–ò –í–´–ü–ò–°–ö–ò                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                                     
‚îÇ Client  ‚îÇ ‚îÄ‚îÄ 1. POST /api/matematika/generate-statement ‚îÄ‚îÄ‚îê                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                 ‚îÇ                  
                                                            ‚îÇ                  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                 ‚îÇ                  
‚îÇ  Nginx  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  
‚îÇ Gateway ‚îÇ                                                 ‚îÇ                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                 ‚îÇ                  
     ‚îÇ                                                      ‚îÇ                  
     ‚îÇ 2. POST /generate-statement                          ‚îÇ                  
     ‚ñº                                                      ‚îÇ                  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                ‚îÇ                  
‚îÇMatematika‚îÇ ‚îÄ‚îÄ 3. GET /api/shared/config/patterns ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                  
‚îÇ Service  ‚îÇ   4. GET /api/shared/config/holidays ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                          ‚îÇ ‚îÇ  ‚îÇ                  
     ‚îÇ                                                ‚îÇ ‚îÇ  ‚îÇ                  
     ‚îÇ 5. –†–∞—Å—á–µ—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π              ‚îÇ ‚îÇ  ‚îÇ                  
     ‚îÇ                                                ‚îÇ ‚îÇ  ‚îÇ                  
     ‚îÇ 6. PUBLISH statement.calculation.completed ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚ñº                                                ‚îÇ ‚îÇ  ‚îÇ                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                           ‚îÇ ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  Kafka  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ Message ‚îÇ                                             ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  Queue  ‚îÇ                                             ‚îÇ  ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                             ‚îÇ  ‚îÇ                 ‚îÇ
     ‚îÇ                                                  ‚îÇ  ‚îÇ                 ‚îÇ
     ‚îÇ 7. CONSUME statement.calculation.completed ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚ñº                                                  ‚îÇ  ‚îÇ                  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                             ‚îÇ  ‚îÇ                  
‚îÇ Maska   ‚îÇ ‚îÄ‚îÄ 8. GET /api/shared/config/masks ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ                  
‚îÇ Service ‚îÇ   9. GET /api/shared/config/contractors ‚îÄ‚îÄ‚îº‚îÄ‚îò  ‚îÇ                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                           ‚îÇ    ‚îÇ                  
     ‚îÇ                                                ‚îÇ    ‚îÇ                  
     ‚îÇ 10. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/HTML/Excel  ‚îÇ    ‚îÇ                  
     ‚îÇ                                                ‚îÇ    ‚îÇ                  
     ‚îÇ 11. PUBLISH statement.formatting.completed ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚ñº                                                ‚îÇ    ‚îÇ                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                           ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ  Kafka  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ                 ‚îÇ
‚îÇ Message ‚îÇ                                                ‚îÇ                 ‚îÇ
‚îÇ  Queue  ‚îÇ                                                ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                ‚îÇ                 ‚îÇ
     ‚îÇ                                                     ‚îÇ                 ‚îÇ
     ‚îÇ 12. CONSUME statement.formatting.completed ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚ñº                                                     ‚îÇ                  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                ‚îÇ                  
‚îÇ  Nginx  ‚îÇ‚Üê‚îÄ‚îÄ 13. GET /api/maska/statements/{id}/download ‚îò                  
‚îÇGateway  ‚îÇ                                                ‚îÇ                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                ‚îÇ                  
     ‚îÇ                                                     ‚îÇ                  
     ‚îÇ 14. Response: PDF/HTML/Excel —Ñ–∞–π–ª                   ‚îÇ                  
     ‚ñº                                                     ‚îÇ                  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                ‚îÇ                  
‚îÇ Client  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                                    

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                            –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –°–ï–†–í–ò–°–´                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                HTTP GET                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇMatematika‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ Shared  ‚îÇ
‚îÇ Service  ‚îÇ                                        ‚îÇ Service ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                                                   ‚îÇ
     ‚îÇ ‚Ä¢ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤                          ‚îÇ
     ‚îÇ ‚Ä¢ –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤                              ‚îÇ
     ‚îÇ ‚Ä¢ –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞                                  ‚îÇ
     ‚îÇ                                                   ‚îÇ
     ‚îÇ                                                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                HTTP GET                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Maska   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ Shared  ‚îÇ
‚îÇ Service ‚îÇ                                        ‚îÇ Service ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                                                   ‚îÇ
     ‚îÇ ‚Ä¢ –®–∞–±–ª–æ–Ω—ã –º–∞—Å–æ–∫                                   ‚îÇ
     ‚îÇ ‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤                        ‚îÇ
     ‚îÇ ‚Ä¢ –§–æ—Ä–º–∞—Ç—ã –æ–ø–∏—Å–∞–Ω–∏–π                                ‚îÇ
     ‚îÇ                                                   ‚îÇ
```

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

#### **HTTP Endpoints:**
```
Matematika Service:
- POST /generate-statement
- GET /statement/{id}/status
- GET /statement/{id}/result

Maska Service:
- GET /statement/{id}/formatted
- POST /statement/{id}/generate-pdf
- GET /statement/{id}/download
- PUT /user/{id}/settings

Shared Service:
- GET /config/patterns
- GET /config/holidays
- GET /config/masks
- GET /config/contractors/{category}
```

#### **Kafka Topics:**
```
statement.generation.request:
{
  "statementId": "string",
  "accountId": "string", 
  "month": "string",
  "businessType": "B2B|B2C",
  "initialBalance": "number"
}

statement.calculation.completed:
{
  "statementId": "string",
  "accountId": "string",
  "status": "completed|failed",
  "data": { /* —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ */ }
}

statement.formatting.completed:
{
  "statementId": "string",
  "status": "ready|failed",
  "downloadUrl": "string",
  "formats": ["pdf", "html", "excel"]
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
business_bank_back/
‚îú‚îÄ‚îÄ .github/workflows/             # CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ ci.yml                     # Continuous Integration
‚îÇ   ‚îú‚îÄ‚îÄ deploy.yml                 # Deployment pipeline
‚îÇ   ‚îî‚îÄ‚îÄ security.yml               # Security scanning
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ matematika/                # Go - –ß–∏—Å–ª–æ–≤–æ–µ —è–¥—Ä–æ (—Ä–∞—Å—á–µ—Ç—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ main.go        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculation/       # –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler.go     # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.go     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository.go  # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.go      # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calculator.go  # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transactions/      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generator.go   # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator.go   # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.go       # –¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ patterns.go    # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ business-rules/    # –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rules.go       # –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constraints.go # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holidays.go    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.go  # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kafka/             # Kafka –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ producer.go    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ consumer.go    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.go   # –°—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kafka
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middleware
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.go        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.go     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cors.go        # CORS
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recovery.go    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–Ω–∏–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.go      # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.go    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kafka.go       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Kafka
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database/          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ postgres.go    # PostgreSQL –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ redis.go       # Redis –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ migrations/    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pkg/                   # –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger/            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.go      # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ structured.go  # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator/         # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator.go   # –í–∞–ª–∏–¥–∞—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rules.go       # –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calculator/        # –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ math.go        # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ financial.go  # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/              # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculation_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transactions_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ business_rules_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kafka_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fixtures/          # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ statements.json
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ transactions.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ go.mod                 # Go –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ go.sum                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker –æ–±—Ä–∞–∑
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ maska/                     # NestJS - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatting/        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatting.controller.ts    # HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatting.service.ts       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatting.module.ts        # NestJS –º–æ–¥—É–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dto/                        # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ format-statement.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ generate-pdf.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ user-settings.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/         # –†–∞–±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates.service.ts        # –°–µ—Ä–≤–∏—Å —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates.module.ts         # –ú–æ–¥—É–ª—å —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ processors/                  # –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ pdf.processor.ts        # PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ html.processor.ts       # HTML –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ json.processor.ts       # JSON –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ excel.processor.ts     # Excel –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks/             # –ú–∞—Å–∫–∏ –æ–ø–∏—Å–∞–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks.service.ts            # –°–µ—Ä–≤–∏—Å –º–∞—Å–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks.module.ts             # –ú–æ–¥—É–ª—å –º–∞—Å–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ processors/                 # –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –º–∞—Å–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ description.processor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ company.processor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ transaction.processor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kafka/             # Kafka –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ consumer.service.ts         # Kafka consumer
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ consumer.module.ts          # –ú–æ–¥—É–ª—å consumer
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ processors/                 # –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ statement.processor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ calculation.processor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings/          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.controller.ts      # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.service.ts         # –°–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.module.ts          # –ú–æ–¥—É–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ user-settings.entity.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/            # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decorators/                 # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ correlation-id.decorator.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.decorator.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filters/                    # –§–∏–ª—å—Ç—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http-exception.filter.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.filter.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interceptors/              # –ò–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.interceptor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ correlation.interceptor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pipes/                     # –ü–∞–π–ø—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ validation.pipe.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ transform.pipe.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.config.ts          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis.config.ts            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Redis
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kafka.config.ts            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Kafka
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.config.ts               # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/          # TypeORM —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statement.entity.ts         # –°—É—â–Ω–æ—Å—Ç—å –≤—ã–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ template.entity.ts         # –°—É—â–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user-settings.entity.ts    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.ts            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/              # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatting/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kafka/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ e2e/               # End-to-End —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ statement-generation.e2e-spec.ts
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ pdf-generation.e2e-spec.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package.json           # NPM –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package-lock.json      # –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json          # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nest-cli.json          # NestJS CLI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker –æ–±—Ä–∞–∑
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ shared/                    # Go - –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ cmd/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ main.go        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ internal/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api/               # HTTP API –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler.go     # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.go      # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware.go  # Middleware
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go      # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ patterns/          # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –±–∏–∑–Ω–µ—Å–∞
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ patterns.service.go        # –°–µ—Ä–≤–∏—Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ patterns.repository.go     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ patterns.go                 # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loader.go                   # –ó–∞–≥—Ä—É–∑—á–∏–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ contractors/       # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contractors.service.go      # –°–µ—Ä–≤–∏—Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contractors.repository.go   # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv/                       # CSV –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser.go              # –ü–∞—Ä—Å–µ—Ä CSV
‚îÇ       ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loader.go              # –ó–∞–≥—Ä—É–∑—á–∏–∫ CSV
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go                   # –ú–æ–¥–µ–ª–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ holidays/          # –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holidays.service.go        # –°–µ—Ä–≤–∏—Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holidays.repository.go     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go                  # –ú–æ–¥–µ–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ masks/             # –®–∞–±–ª–æ–Ω—ã –º–∞—Å–æ–∫
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks.service.go           # –°–µ—Ä–≤–∏—Å –º–∞—Å–æ–∫
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ masks.repository.go        # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–∞—Å–æ–∫
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go                  # –ú–æ–¥–µ–ª–∏ –º–∞—Å–æ–∫
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ id-generator.go            # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ID
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json-validator.go         # –í–∞–ª–∏–¥–∞—Ç–æ—Ä JSON
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv-parser.go              # –ü–∞—Ä—Å–µ—Ä CSV
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ file-loader.go              # –ó–∞–≥—Ä—É–∑—á–∏–∫ —Ñ–∞–π–ª–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middleware
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.go                    # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.go                # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cors.go                    # CORS
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recovery.go                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–Ω–∏–∫
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.go                  # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.go                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ file-storage.go            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ database/          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ postgres.go                # PostgreSQL –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ migrations/                # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ data/                  # CSV —Ñ–∞–π–ª—ã –∏ —à–∞–±–ª–æ–Ω—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ contractors/                   # –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gateways.csv              # –®–ª—é–∑—ã
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retails_ca.csv            # –†–æ–∑–Ω–∏—Ü–∞ –ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retails_ny.csv            # –†–æ–∑–Ω–∏—Ü–∞ –ù—å—é-–ô–æ—Ä–∫
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ suppliers.csv             # –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ holidays/                      # –ü—Ä–∞–∑–¥–Ω–∏–∫–∏
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holidays.json             # JSON –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ business-days.json        # –†–∞–±–æ—á–∏–µ –¥–Ω–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ masks/                         # –®–∞–±–ª–æ–Ω—ã –º–∞—Å–æ–∫
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ templates.json            # JSON —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ descriptions.json         # –û–ø–∏—Å–∞–Ω–∏—è
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ formats.json              # –§–æ—Ä–º–∞—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ pkg/                   # –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ logger/            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.go      # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ structured.go  # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ validator/         # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator.go   # –í–∞–ª–∏–¥–∞—Ç–æ—Ä
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rules.go       # –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ csv.go         # CSV —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ json.go        # JSON —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ file.go        # –§–∞–π–ª–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ test/                  # –¢–µ—Å—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ unit/              # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config_test.go
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ patterns_test.go
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contractors_test.go
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holidays_test.go
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ masks_test.go
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ integration/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_test.go
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data_test.go
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ fixtures/          # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ test-patterns.json
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ test-contractors.csv
‚îÇ       ‚îú‚îÄ‚îÄ go.mod                 # Go –º–æ–¥—É–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ go.sum                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile             # Docker –æ–±—Ä–∞–∑
‚îÇ       ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ contracts/                     # API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ openapi/                   # OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ matematika-service.yaml    # API Matematika
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maska-service.yaml         # API Maska
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared-service.yaml        # API Shared
‚îÇ   ‚îú‚îÄ‚îÄ kafka/                     # Kafka —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statement-generation.json  # –°—Ö–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculation-completed.json # –°—Ö–µ–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatting-completed.json  # –°—Ö–µ–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ types/                     # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îÇ       ‚îú‚îÄ‚îÄ typescript/            # TypeScript —Ç–∏–ø—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ statement.types.ts      # –¢–∏–ø—ã –≤—ã–ø–∏—Å–æ–∫
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ transaction.types.ts    # –¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ user.types.ts          # –¢–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ common.types.ts         # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îÇ       ‚îî‚îÄ‚îÄ go/                    # Go —Ç–∏–ø—ã
‚îÇ           ‚îú‚îÄ‚îÄ statement/         # –¢–∏–ø—ã –≤—ã–ø–∏—Å–æ–∫
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ statement.go
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ transaction.go
‚îÇ           ‚îú‚îÄ‚îÄ user/              # –¢–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ user.go
‚îÇ           ‚îî‚îÄ‚îÄ common/             # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îÇ               ‚îú‚îÄ‚îÄ response.go
‚îÇ               ‚îî‚îÄ‚îÄ error.go
‚îú‚îÄ‚îÄ infrastructure/                # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ nginx/                     # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf             # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ default.conf            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ssl/                    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/                # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prometheus/             # Prometheus
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rules/              # –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ grafana/               # Grafana
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboards/         # –î–∞—à–±–æ—Ä–¥—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ matematika.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maska.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ datasources/        # –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jaeger/                # Jaeger
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ jaeger.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jaeger
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loki/                  # Loki
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ loki.yml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Loki
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                   # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ deploy.sh              # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ backup.sh              # –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ migrate.sh             # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ health-check.sh        # –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
‚îú‚îÄ‚îÄ docs/                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/                       # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ matematika-api.md      # API Matematika
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maska-api.md           # API Maska
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared-api.md          # API Shared
‚îÇ   ‚îú‚îÄ‚îÄ architecture/              # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system-overview.md     # –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ microservices.md       # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data-flow.md           # –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ deployment/                # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local-setup.md         # –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ production.md          # –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ troubleshooting.md     # –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ development/               # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ getting-started.md     # –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ coding-standards.md    # –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ testing.md             # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ docker-compose.yml             # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–û–°–ù–û–í–ù–û–ô)
‚îú‚îÄ‚îÄ docker-compose.prod.yml        # –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–û–°–ù–û–í–ù–û–ô)
‚îú‚îÄ‚îÄ Makefile                       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º
‚îú‚îÄ‚îÄ .env.example                   # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env.local                     # –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .env.prod                      # –ü—Ä–æ–¥–∞–∫—à–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .gitignore                     # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üê≥ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è Docker —Ñ–∞–π–ª–æ–≤:**

#### **–ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã (–û–°–ù–û–í–ù–´–ï):**
- `docker-compose.yml` - **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**
- `docker-compose.prod.yml` - **–ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
- `.env.example` - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `.env.local` - –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ –≤ git)
- `.env.prod` - –ü—Ä–æ–¥–∞–∫—à–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ –≤ git)

#### **–°–µ—Ä–≤–∏—Å—ã (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ Dockerfile):**
- `services/matematika/Dockerfile` - Go —Å–µ—Ä–≤–∏—Å
- `services/maska/Dockerfile` - NestJS —Å–µ—Ä–≤–∏—Å  
- `services/shared/Dockerfile` - Go —Å–µ—Ä–≤–∏—Å

#### **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏):**
- `infrastructure/nginx/` - Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `infrastructure/monitoring/` - Prometheus, Grafana, Jaeger, Loki

### üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker —Ñ–∞–π–ª–æ–≤:**

```
business_bank_back/
‚îú‚îÄ‚îÄ docker-compose.yml              # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ docker-compose.prod.yml         # –ü—Ä–æ–¥–∞–∫—à–Ω
‚îú‚îÄ‚îÄ .env.example                    # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ .env.local                      # –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (gitignore)
‚îú‚îÄ‚îÄ .env.prod                       # –ü—Ä–æ–¥–∞–∫—à–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (gitignore)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ matematika/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile              # Go —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ maska/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile              # NestJS —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îî‚îÄ‚îÄ shared/
‚îÇ       ‚îî‚îÄ‚îÄ Dockerfile              # Go —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ infrastructure/
    ‚îú‚îÄ‚îÄ nginx/
    ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf
    ‚îÇ   ‚îî‚îÄ‚îÄ default.conf
    ‚îî‚îÄ‚îÄ monitoring/
        ‚îú‚îÄ‚îÄ prometheus/
        ‚îú‚îÄ‚îÄ grafana/
        ‚îú‚îÄ‚îÄ jaeger/
        ‚îî‚îÄ‚îÄ loki/
```

### üîß **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

#### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç docker-compose.yml + .env.local
docker-compose up -d
```

#### **–ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç docker-compose.prod.yml + .env.prod
docker-compose -f docker-compose.prod.yml up -d
```

#### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º
cp .env.example .env.local
cp .env.example .env.prod

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
nano .env.local
nano .env.prod
```

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º

### Makefile –∫–æ–º–∞–Ω–¥—ã:
```makefile
.PHONY: dev dev-build test build deploy clean logs restart migrate setup

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
setup:
	@echo "Setting up environment..."
	@if [ ! -f .env.local ]; then cp .env.example .env.local; fi
	@if [ ! -f .env.prod ]; then cp .env.example .env.prod; fi
	@echo "Environment files created. Please edit .env.local and .env.prod"

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
dev:
	@echo "Starting development environment..."
	docker-compose up -d
	@echo "All services running:"
	@echo "Matematika Service: http://localhost:8080"
	@echo "Maska Service: http://localhost:3000"
	@echo "Shared Service: http://localhost:8081"
	@echo "Kafka: http://localhost:9092"
	@echo "Grafana: http://localhost:3001"
	@echo "Nginx Gateway: http://localhost:80"

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
dev-build:
	@echo "Building and starting development environment..."
	docker-compose up -d --build
	@echo "All services running with latest changes"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
test:
	@echo "Running tests..."
	@cd services/matematika && go test ./...
	@cd services/maska && npm test
	@cd services/shared && go test ./...
	@echo "All tests completed"

# –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
build:
	@echo "Building all services..."
	docker-compose build
	@echo "Build completed"

# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
deploy:
	@echo "Deploying to production..."
	docker-compose -f docker-compose.prod.yml up -d
	@echo "Production deployment completed"

# –û—á–∏—Å—Ç–∫–∞
clean:
	@echo "Cleaning up..."
	docker-compose down -v
	docker-compose -f docker-compose.prod.yml down -v
	docker system prune -f
	@echo "Cleanup completed"

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
logs:
	docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
logs-matematika:
	docker-compose logs -f matematika

logs-maska:
	docker-compose logs -f maska

logs-shared:
	docker-compose logs -f shared

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
restart:
	docker-compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
restart-matematika:
	docker-compose restart matematika

restart-maska:
	docker-compose restart maska

restart-shared:
	docker-compose restart shared

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
migrate:
	@echo "Running database migrations..."
	@cd services/matematika && go run cmd/migrate/main.go
	@cd services/maska && npm run migration:run
	@cd services/shared && go run cmd/migrate/main.go
	@echo "Migrations completed"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
health:
	@echo "Checking service health..."
	@curl -f http://localhost:8080/health || echo "Matematika: DOWN"
	@curl -f http://localhost:3000/health || echo "Maska: DOWN"
	@curl -f http://localhost:8081/health || echo "Shared: DOWN"
	@echo "Health check completed"

# –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞
stop:
	docker-compose down
	docker-compose -f docker-compose.prod.yml down

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
status:
	docker-compose ps
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- **Matematika:** –¢–µ—Å—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤ –±–∞–ª–∞–Ω—Å–æ–≤, –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤, –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
- **Maska:** –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∞—Å–æ–∫, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF
- **Shared:** –¢–µ—Å—Ç—ã –≤—ã–¥–∞—á–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### 2. –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã
- JSON-—Å—Ö–µ–º—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤ Kafka-—Å–æ–æ–±—â–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

### 3. End-to-End —Ç–µ—Å—Ç—ã
- –°—Ü–µ–Ω–∞—Ä–∏–π "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–ø–∏—Å–∫–∏ –∑–∞ –º–µ—Å—è—Ü —Å 5-–π –ø—è—Ç–Ω–∏—Ü–µ–π"
- –°—Ü–µ–Ω–∞—Ä–∏–π "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Winston –≤ NestJS –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (JSON)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä —á–µ—Ä–µ–∑ Loki (Grafana Loki)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ –æ—à–∏–±–æ–∫

### Correlation ID –¥–ª—è —Å–∫–≤–æ–∑–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ (UUID) –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Å–∏—Å—Ç–µ–º—ã
- –ü–µ—Ä–µ–¥–∞—á–∞ correlationId —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ Kafka
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±—Ä–∞—Ç—å –≤—Å—é —Ü–µ–ø–æ—á–∫—É —Å–æ–±—ã—Ç–∏–π –ø–æ –æ–¥–Ω–æ–º—É ID

### Distributed Tracing
- OpenTelemetry –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- Jaeger –¥–ª—è —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–π—Å–æ–≤
- –°–≤—è–∑—å –ª–æ–≥–æ–≤ —Å —Ç—Ä–µ–π—Å–∞–º–∏ —á–µ—Ä–µ–∑ correlationId

## –û–±–æ–∑—Ä–µ–≤–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

### Health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- GET /health –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î, Kafka, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (Docker/K8s)

### –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: generated_statements_total, generation_duration
- Grafana –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- NestJS ConfigModule –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ .env —Ñ–∞–π–ª—ã

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Stateless –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —á–µ—Ä–µ–∑ Docker/K8s
- Kafka consumer groups –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

### –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ–µ–≤ –∏ –ø–æ–≤—Ç–æ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- Kafka at-least-once –¥–æ—Å—Ç–∞–≤–∫–∞
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–∏—Ü–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∞—Ä–∏—è
- ValidationPipe —Å DTO –∏ class-validator
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-—É—Å–ª–æ–≤–∏–π –Ω–∞ –≤—Ö–æ–¥–µ
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
- Network policy –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏
- Bearer token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP

### –ó–∞—â–∏—Ç–∞ –æ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ORM –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å –æ—à–∏–±–æ–∫ –±–µ–∑ —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Swagger / OpenAPI
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö REST endpoints
- –ñ–∏–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º
- –î–æ—Å—Ç—É–ø –∫ /docs endpoint –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### JSON-—Å—Ö–µ–º—ã
- –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –°—Ö–µ–º—ã Kafka-—Å–æ–æ–±—â–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### üóÑÔ∏è **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞:**

#### **1. Matematika Service Database (PostgreSQL)**

**–¢–∞–±–ª–∏—Ü–∞: `statements`**
```sql
CREATE TABLE statements (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    account_id VARCHAR(50) NOT NULL,
    month VARCHAR(7) NOT NULL, -- Format: YYYY-MM
    business_type VARCHAR(10) NOT NULL, -- B2B, B2C
    initial_balance DECIMAL(15,2) NOT NULL,
    final_balance DECIMAL(15,2),
    total_income DECIMAL(15,2),
    total_expenses DECIMAL(15,2),
    net_profit DECIMAL(15,2),
    profit_percentage DECIMAL(5,2),
    status VARCHAR(20) NOT NULL, -- pending, processing, completed, failed
    correlation_id UUID,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);

CREATE INDEX idx_statements_account_month ON statements(account_id, month);
CREATE INDEX idx_statements_correlation_id ON statements(correlation_id);
CREATE INDEX idx_statements_status ON statements(status);
```

**–¢–∞–±–ª–∏—Ü–∞: `transactions`**
```sql
CREATE TABLE transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    statement_id UUID NOT NULL REFERENCES statements(id) ON DELETE CASCADE,
    transaction_date DATE NOT NULL,
    transaction_type VARCHAR(20) NOT NULL, -- income, expense
    category VARCHAR(50) NOT NULL, -- ACH, Wire, Payroll, etc.
    amount DECIMAL(15,2) NOT NULL,
    balance_after DECIMAL(15,2) NOT NULL,
    is_user_defined BOOLEAN DEFAULT FALSE,
    user_notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_transactions_statement_id ON transactions(statement_id);
CREATE INDEX idx_transactions_date ON transactions(transaction_date);
CREATE INDEX idx_transactions_type_category ON transactions(transaction_type, category);
```

**–¢–∞–±–ª–∏—Ü–∞: `business_rules`**
```sql
CREATE TABLE business_rules (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    rule_name VARCHAR(100) NOT NULL UNIQUE,
    rule_type VARCHAR(50) NOT NULL, -- profit_range, transaction_frequency, etc.
    business_type VARCHAR(10) NOT NULL, -- B2B, B2C
    min_value DECIMAL(10,2),
    max_value DECIMAL(10,2),
    default_value DECIMAL(10,2),
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_business_rules_type ON business_rules(business_type, is_active);
```

**–¢–∞–±–ª–∏—Ü–∞: `template_transactions`**
```sql
CREATE TABLE template_transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    business_type VARCHAR(10) NOT NULL,
    category VARCHAR(50) NOT NULL,
    transaction_type VARCHAR(20) NOT NULL,
    frequency_per_month INTEGER NOT NULL,
    min_amount DECIMAL(15,2),
    max_amount DECIMAL(15,2),
    percentage_of_total DECIMAL(5,2),
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_template_transactions_business_type ON template_transactions(business_type, is_active);
```

---

#### **2. Maska Service Database (PostgreSQL)**

**–¢–∞–±–ª–∏—Ü–∞: `formatted_statements`**
```sql
CREATE TABLE formatted_statements (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    statement_id UUID NOT NULL,
    format_type VARCHAR(20) NOT NULL, -- pdf, html, excel, json
    file_path TEXT,
    file_size BIGINT,
    download_url TEXT,
    status VARCHAR(20) NOT NULL, -- pending, processing, ready, failed
    correlation_id UUID,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);

CREATE INDEX idx_formatted_statements_statement_id ON formatted_statements(statement_id);
CREATE INDEX idx_formatted_statements_status ON formatted_statements(status);
CREATE INDEX idx_formatted_statements_correlation_id ON formatted_statements(correlation_id);
```

**–¢–∞–±–ª–∏—Ü–∞: `user_settings`**
```sql
CREATE TABLE user_settings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(50) NOT NULL,
    account_id VARCHAR(50) NOT NULL,
    custom_contractors JSONB, -- {category: contractor_name}
    preferred_format VARCHAR(20) DEFAULT 'pdf',
    company_name VARCHAR(255),
    company_address TEXT,
    bank_name VARCHAR(255),
    account_number VARCHAR(50),
    routing_number VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, account_id)
);

CREATE INDEX idx_user_settings_user_account ON user_settings(user_id, account_id);
```

**–¢–∞–±–ª–∏—Ü–∞: `statement_cache`**
```sql
CREATE TABLE statement_cache (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    cache_key VARCHAR(255) NOT NULL UNIQUE,
    statement_data JSONB NOT NULL,
    format_type VARCHAR(20) NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_statement_cache_key ON statement_cache(cache_key);
CREATE INDEX idx_statement_cache_expires ON statement_cache(expires_at);
```

---

#### **3. Shared Service Database (PostgreSQL)**

**–¢–∞–±–ª–∏—Ü–∞: `business_patterns`**
```sql
CREATE TABLE business_patterns (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    pattern_name VARCHAR(100) NOT NULL UNIQUE,
    pattern_type VARCHAR(50) NOT NULL, -- industry, structure, etc.
    business_type VARCHAR(10) NOT NULL, -- B2B, B2C
    naics_code VARCHAR(10),
    description TEXT,
    configuration JSONB NOT NULL, -- Pattern-specific settings
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_business_patterns_type ON business_patterns(business_type, is_active);
CREATE INDEX idx_business_patterns_naics ON business_patterns(naics_code);
```

**–¢–∞–±–ª–∏—Ü–∞: `contractors`**
```sql
CREATE TABLE contractors (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    contractor_name VARCHAR(255) NOT NULL,
    category VARCHAR(50) NOT NULL, -- gateway, retail, supplier, etc.
    region VARCHAR(50), -- CA, NY, etc.
    business_type VARCHAR(10), -- B2B, B2C, both
    contact_info JSONB, -- phone, email, address
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_contractors_category_region ON contractors(category, region);
CREATE INDEX idx_contractors_business_type ON contractors(business_type);
CREATE INDEX idx_contractors_active ON contractors(is_active);
```

**–¢–∞–±–ª–∏—Ü–∞: `holidays`**
```sql
CREATE TABLE holidays (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    holiday_date DATE NOT NULL,
    holiday_name VARCHAR(255) NOT NULL,
    holiday_type VARCHAR(50), -- federal, state, business
    region VARCHAR(50), -- US, CA, NY, etc.
    is_business_holiday BOOLEAN DEFAULT TRUE,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(holiday_date, region)
);

CREATE INDEX idx_holidays_date ON holidays(holiday_date);
CREATE INDEX idx_holidays_region ON holidays(region);
CREATE INDEX idx_holidays_business ON holidays(is_business_holiday);
```

**–¢–∞–±–ª–∏—Ü–∞: `mask_templates`**
```sql
CREATE TABLE mask_templates (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    template_name VARCHAR(100) NOT NULL,
    category VARCHAR(50) NOT NULL,
    transaction_type VARCHAR(20) NOT NULL,
    template_pattern TEXT NOT NULL, -- {Company} DES:ACH Pmt ID:{ID}
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_mask_templates_category_type ON mask_templates(category, transaction_type);
CREATE INDEX idx_mask_templates_active ON mask_templates(is_active);
```

**–¢–∞–±–ª–∏—Ü–∞: `system_configs`**
```sql
CREATE TABLE system_configs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    config_key VARCHAR(100) NOT NULL UNIQUE,
    config_value JSONB NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_system_configs_key ON system_configs(config_key);
CREATE INDEX idx_system_configs_active ON system_configs(is_active);
```

---

### üìä **–°—Ö–µ–º–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏:**

```
Matematika Service:
‚îú‚îÄ‚îÄ statements (1) ‚îÄ‚îÄ‚Üí (N) transactions
‚îú‚îÄ‚îÄ business_rules (standalone)
‚îî‚îÄ‚îÄ template_transactions (standalone)

Maska Service:
‚îú‚îÄ‚îÄ formatted_statements (1) ‚îÄ‚îÄ‚Üí (1) statements (external)
‚îú‚îÄ‚îÄ user_settings (standalone)
‚îî‚îÄ‚îÄ statement_cache (standalone)

Shared Service:
‚îú‚îÄ‚îÄ business_patterns (standalone)
‚îú‚îÄ‚îÄ contractors (standalone)
‚îú‚îÄ‚îÄ holidays (standalone)
‚îú‚îÄ‚îÄ mask_templates (standalone)
‚îî‚îÄ‚îÄ system_configs (standalone)
```

### üîÑ **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—ã:**

```
1. Client Request ‚Üí Matematika
2. Matematika ‚Üí statements (create)
3. Matematika ‚Üí template_transactions (read patterns)
4. Matematika ‚Üí business_rules (validate)
5. Matematika ‚Üí transactions (generate & save)
6. Matematika ‚Üí Kafka (publish result)
7. Maska ‚Üê Kafka (consume)
8. Maska ‚Üí formatted_statements (create)
9. Maska ‚Üí user_settings (read preferences)
10. Maska ‚Üí contractors (read from Shared)
11. Maska ‚Üí mask_templates (read from Shared)
12. Maska ‚Üí statement_cache (save result)
```

### üöÄ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

#### **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
- **Matematika** - —Ç–æ–ª—å–∫–æ —Ä–∞—Å—á–µ—Ç—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **Maska** - —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫—ç—à
- **Shared** - —Ç–æ–ª—å–∫–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥–∏

#### **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ—é –ë–î
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —à–∞—Ä–¥–∏–Ω–≥–∞ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º

#### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–°—Ç—Ä–æ–≥–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** –º–µ–∂–¥—É —Ç—Ä–µ–º—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- **–í—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** —á–µ—Ä–µ–∑ stateless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ Kafka
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ fault tolerance –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** —á–µ—Ä–µ–∑ —á–µ—Ç–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- **–û–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö













üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é:
1. –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
2. MVP –ø–æ–¥—Ö–æ–¥:
–°–Ω–∞—á–∞–ª–∞ –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
–ü–æ—Ç–æ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
–í –∫–æ–Ω—Ü–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:
–í—ã—Å–æ–∫–∏–π: Matematika (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
–°—Ä–µ–¥–Ω–∏–π: Maska (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
–ù–∏–∑–∫–∏–π: Shared (–∫–æ–Ω—Ñ–∏–≥–∏)